---
# Shared Keycloak configuration for all SonarQube servers

# Keycloak configuration (using reverse proxy)
keycloak_host_ip: "{{ hostvars[groups['keycloak'][0]]['ansible_host'] | default(groups['keycloak'][0]) }}"
keycloak_proxy_ip: "{{ hostvars[groups['nginx'][0]]['ansible_host'] | default(groups['nginx'][0]) }}"
keycloak_server_name: "keycloak.local"
keycloak_base_url: "https://{{ keycloak_server_name }}"

# Keycloak admin credentials (shared)
sonarqube_keycloak_saml_keycloak_admin_user: "{{ vault_KEYCLOAK_ADMIN_USERNAME }}"
sonarqube_keycloak_saml_keycloak_admin_password: "{{ vault_KEYCLOAK_ADMIN_PASSWORD }}"

# Groups Configuration (shared across all SonarQube instances)
sonarqube_keycloak_saml_groups:
  sonar_users:
    name: "sonar-users"
    description: "SonarQube Users Group"

# Test User Configuration (shared)
sonarqube_keycloak_saml_test_user:
  enabled: true
  username: "demo.user"
  password: "demo123!"
  email: "demo@example.com"
  first_name: "Demo"
  last_name: "User"
  groups:
    - "sonar-users"

# Debug Logging
sonarqube_keycloak_saml_debug_logging: false
