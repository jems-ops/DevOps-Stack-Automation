---
- name: Install SSL Certificate for Jenkins Nginx Proxy
  hosts: nginx
  gather_facts: yes
  become: yes
  
  pre_tasks:
    - name: Display SSL installation information
      debug:
        msg: |
          ğŸ”’ SSL Certificate Installation Playbook
          ğŸ“… Execution time: {{ ansible_date_time.iso8601 }}
          ğŸ–¥ï¸  Nginx server: {{ inventory_hostname }}
          ğŸ  Certificate directory: /etc/nginx/tls
          ğŸ‘¤ User: {{ ansible_user }}
          
  roles:
    - install-ssl-cert
    
  post_tasks:
    - name: Display completion message
      debug:
        msg: |
          âœ… SSL Certificate Installation Complete!
          
          ğŸ“Š Summary:
          â€¢ SSL enabled on: {{ inventory_hostname }}
          â€¢ Certificate: /etc/nginx/tls/jenkins.crt
          â€¢ Private key: /etc/nginx/tls/jenkins.key
          
          ğŸ”’ Security Features:
          â€¢ Self-signed SSL certificate
          â€¢ TLS 1.2 and 1.3 support
          â€¢ Strong cipher suites
          â€¢ HSTS enabled
          â€¢ HTTP â†’ HTTPS redirect
          
          ğŸŒ Access Information:
          â€¢ HTTPS: https://{{ inventory_hostname }}
          â€¢ Domain: https://jenkins.example.com (configure DNS)
          â€¢ HTTP redirects to HTTPS automatically
          
          âš ï¸  Note: Self-signed certificate requires browser security exception
          
          ğŸ‰ Jenkins is now accessible via HTTPS reverse proxy!