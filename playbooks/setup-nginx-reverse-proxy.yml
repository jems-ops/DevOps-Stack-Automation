---
- name: Setup Nginx Reverse Proxy for Jenkins
  hosts: nginx
  gather_facts: yes
  become: yes
  
  pre_tasks:
    - name: Display proxy setup information
      debug:
        msg: |
          ğŸŒ Nginx Reverse Proxy Setup Playbook
          ğŸ“… Execution time: {{ ansible_date_time.iso8601 }}
          ğŸ–¥ï¸  Nginx server: {{ inventory_hostname }}
          ğŸ”— Jenkins backend: 192.168.92.224:8080
          ğŸ‘¤ User: {{ ansible_user }}
          
  roles:
    - setup-nginx-reverse-proxy
    
  post_tasks:
    - name: Display completion message
      debug:
        msg: |
          âœ… Nginx Reverse Proxy Setup Complete!
          
          ğŸ“Š Summary:
          â€¢ Nginx server: {{ inventory_hostname }}
          â€¢ Backend: 192.168.92.224:8080
          â€¢ Configuration: /etc/nginx/conf.d/jenkins.conf
          
          ğŸŒ Access Information:
          â€¢ Direct Jenkins: http://192.168.92.224:8080
          â€¢ Via Proxy: http://{{ inventory_hostname }}
          â€¢ Domain: http://jenkins.example.com (configure DNS)
          
          ğŸ”§ Next Steps:
          1. Test proxy: curl -I http://{{ inventory_hostname }}
          2. Configure DNS/hosts for jenkins.example.com
          3. Install SSL certificate (run install-ssl-cert.yml)