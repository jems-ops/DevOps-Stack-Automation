# SonarQube SAML Configuration
# Generated by Ansible - Keycloak SAML Integration

# SAML Authentication
sonar.auth.saml.enabled=true
sonar.auth.saml.applicationId={{ keycloak_saml_integration_sonarqube_saml_active.application_id }}
sonar.auth.saml.providerName={{ keycloak_saml_integration_sonarqube_saml_active.provider_name }}
sonar.auth.saml.providerId={{ keycloak_saml_integration_keycloak.base_url }}/realms/{{ keycloak_saml_integration_keycloak.realm }}
sonar.auth.saml.loginUrl={{ keycloak_saml_integration_keycloak.base_url }}/realms/{{ keycloak_saml_integration_keycloak.realm }}/protocol/saml
sonar.auth.saml.certificate.secured={{ keycloak_saml_integration_certificate }}
sonar.auth.saml.sp.privateKey.secured=
sonar.auth.saml.sp.certificate.secured=

# User Attributes
sonar.auth.saml.user.login={{ keycloak_saml_integration_sonarqube_saml_active.user_login_attribute }}
sonar.auth.saml.user.name={{ keycloak_saml_integration_sonarqube_saml_active.user_name_attribute }}
sonar.auth.saml.user.email={{ keycloak_saml_integration_sonarqube_saml_active.user_email_attribute }}

# User Provisioning
sonar.auth.saml.user.signUpEnabled={{ keycloak_saml_integration_sonarqube_saml_active.sign_up_enabled | lower }}
sonar.auth.saml.user.defaultGroup={{ keycloak_saml_integration_subgroups.users.name }}

# Group Mapping
sonar.auth.saml.group.name={{ keycloak_saml_integration_sonarqube_saml_active.group_name_attribute }}

# SP Configuration
sonar.auth.saml.sp.entityId={{ keycloak_saml_integration_app_saml.sp_entity_id }}

# Security Settings
sonar.auth.saml.signature.enabled=false

# Server Configuration
sonar.core.serverBaseURL=https://sonar.local

# Web Server Settings
sonar.web.javaOpts=-Xmx512m -Xms128m -XX:+HeapDumpOnOutOfMemoryError
sonar.web.port=9000
sonar.web.host=0.0.0.0

# Database (H2 - for production use PostgreSQL/MySQL)
sonar.embeddedDatabase.port=9092
sonar.jdbc.url=jdbc:h2:tcp://localhost:9092/sonar

# ElasticSearch
sonar.search.javaOpts=-Xmx512m -Xms512m -XX:MaxDirectMemorySize=256m -XX:+HeapDumpOnOutOfMemoryError
