---
# SonarQube-specific SAML Integration Configuration

# Application Configuration
keycloak_saml_integration_app_config:
  home: "/opt/sonarqube"
  config_file: "conf/sonar.properties"
  service_name: "sonarqube"
  user: "sonar"
  group: "sonar"
  saml_callback_url: "/oauth2/callback/saml"

# SAML Attribute Mapping (SonarQube uses 'name' for full_name)
keycloak_saml_integration_saml_attributes:
  username: "username"
  email: "email"
  full_name: "name"
  groups: "groups"

# Protocol Mappers (SonarQube-specific: only 3 mappers, name uses username attribute)
keycloak_saml_integration_protocol_mappers:
  - name: "username"
    protocol: "saml"
    protocol_mapper: "saml-user-property-mapper"
    config:
      "attribute.name": "username"
      "attribute.nameformat": "Basic"
      "user.attribute": "username"

  - name: "name"
    protocol: "saml"
    protocol_mapper: "saml-user-property-mapper"
    config:
      "attribute.name": "name"
      "attribute.nameformat": "Basic"
      "user.attribute": "username"

  - name: "groups"
    protocol: "saml"
    protocol_mapper: "saml-group-membership-mapper"
    config:
      "attribute.name": "groups"
      "attribute.nameformat": "Basic"
      "single": "false"
      "full.path": "false"

# Test User (SonarQube-specific username format)
keycloak_saml_integration_test_user:
  username: "demo.user"

# SAML Security Settings
keycloak_saml_integration_saml_security:
  maximum_authentication_lifetime: 7776000  # 90 days
  force_authentication: false
  sp_entity_id: "sonarqube"

# SonarQube-specific SAML settings
keycloak_saml_integration_sonarqube_saml:
  enabled: true
  application_id: "sonarqube"
  provider_name: "Keycloak SAML"
  sign_requests_enabled: false
  user_login_attribute: "username"
  user_name_attribute: "name"
  user_email_attribute: "email"
  group_name_attribute: "groups"
  sign_up_enabled: true
