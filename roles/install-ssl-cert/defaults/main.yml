---
# Default variables for SSL certificate installation
# Uses dynamic site_backends configuration from group_vars/all.yml

# SSL certificate configuration
ssl_cert_dir: /etc/nginx/tls
ssl_dhparam_file: "{{ ssl_cert_dir }}/dhparam.pem"

# Certificate details
ssl_common_name: "{{ ansible_hostname }}"
ssl_country: "{{ vault_ssl_country | default('US') }}"
ssl_state: "{{ vault_ssl_state | default('CA') }}"
ssl_city: "{{ vault_ssl_city | default('San Francisco') }}"
ssl_organization: "{{ vault_ssl_organization | default('Site Automation') }}"
ssl_organization_unit: IT Department
ssl_email: "{{ vault_ssl_email | default('admin@example.com') }}"

# Certificate validity
ssl_cert_days: 365

# Nginx SSL configuration
nginx_config_path: /etc/nginx/conf.d
nginx_config_file: dynamic-backends.conf
nginx_https_port: 443
nginx_http_port: 80

# SSL security settings
ssl_protocols: "TLSv1.2 TLSv1.3"
ssl_ciphers: "ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384"
ssl_prefer_server_ciphers: "off"

# DH parameters size
ssl_dhparam_bits: 2048

# Site backends are expected to be defined in group_vars/all.yml
# Example structure:
# site_backends:
#   - server_name: jenkins.local
#     ip: 192.168.201.14
#     port: 8080
#     # Optional per-backend rewrite rule:
#     # rewrite_rule: "^/jenkins/(.*) /$1 break"
#   - server_name: sonar.local
#     ip: 192.168.201.16
#     port: 9000
#     # Optional per-backend rewrite rule:
#     # rewrite_rule: "^/sonar/(.*) /$1 break"
#
# Global rewrite rule (applied to all backends):
# site_rewrite_rule: "^/old-path/(.*) /new-path/$1 permanent"
