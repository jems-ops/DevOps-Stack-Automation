---
# Debug Logging for Jenkins-Keycloak SAML Integration

- name: Display comprehensive debug information
  ansible.builtin.debug:
    msg:
      - "=== Jenkins-Keycloak SAML Integration Debug Information ==="
      - ""
      - "ğŸ—ï¸ Jenkins Configuration:"
      - "  Jenkins URL: {{ jenkins_keycloak_saml_jenkins.base_url }}"
      - "  Jenkins Home: {{ jenkins_keycloak_saml_jenkins.home }}"
      - "  SAML Display Name: {{ jenkins_keycloak_saml_jenkins.saml.display_name }}"
      - "  SP Entity ID: {{ jenkins_keycloak_saml_jenkins.saml.sp_entity_id }}"
      - "  Username Attribute: {{ jenkins_keycloak_saml_jenkins.saml.username_attribute }}"
      - "  Email Attribute: {{ jenkins_keycloak_saml_jenkins.saml.email_attribute }}"
      - "  Groups Attribute: {{ jenkins_keycloak_saml_jenkins.saml.groups_attribute }}"
      - "  Force Authentication: {{ jenkins_keycloak_saml_jenkins.saml.force_authentication }}"
      - ""
      - "ğŸ”‘ Keycloak Configuration:"
      - "  Keycloak URL: {{ jenkins_keycloak_saml_keycloak.base_url }}"
      - "  Keycloak Realm: {{ jenkins_keycloak_saml_keycloak.realm }}"
      - "  SAML Client ID: {{ jenkins_keycloak_saml_keycloak.saml_client.client_id }}"
      - "  Force POST Binding: {{ jenkins_keycloak_saml_keycloak.saml_client.attributes.saml_force_post_binding }}"
      - "  Server Signature: {{ jenkins_keycloak_saml_keycloak.saml_client.attributes.saml_server_signature }}"
      - "  Protocol Mappers: {{ jenkins_keycloak_saml_keycloak.saml_client.protocol_mappers | length }} configured"
      - ""
      - "ğŸ‘¥ Groups Configuration:"
      - "  Jenkins Admins: {{ jenkins_keycloak_saml_groups.jenkins_admins.name }}"
      - "  Jenkins Users: {{ jenkins_keycloak_saml_groups.jenkins_users.name }}"
      - ""
      - "ğŸ” SAML URLs:"
      - "  IdP SAML Endpoint: {{ jenkins_keycloak_saml_keycloak.base_url }}/realms/{{ jenkins_keycloak_saml_keycloak.realm }}/protocol/saml"
      - "  IdP Metadata: {{ jenkins_keycloak_saml_keycloak.base_url }}/realms/{{ jenkins_keycloak_saml_keycloak.realm }}/protocol/saml/descriptor"
      - "  Jenkins Login URL: {{ jenkins_keycloak_saml_jenkins.base_url }}/securityRealm/finishLogin"
      - ""
      - "ğŸ“‹ Certificate Info:"
      - "  Certificate Length: {{ keycloak_certificate | length if keycloak_certificate is defined else 'Not extracted' }}"
