---
# Debug Logging for Jenkins-Keycloak SAML Integration

- name: Display comprehensive debug information
  ansible.builtin.debug:
    msg:
      - "=== Jenkins-Keycloak SAML Integration Debug Information ==="
      - ""
      - "ğŸ—ï¸ Jenkins Configuration:"
      - "  Jenkins URL: {{ jenkins.base_url }}"
      - "  Jenkins Home: {{ jenkins.home }}"
      - "  SAML Display Name: {{ jenkins.saml.display_name }}"
      - "  SP Entity ID: {{ jenkins.saml.sp_entity_id }}"
      - "  Username Attribute: {{ jenkins.saml.username_attribute }}"
      - "  Email Attribute: {{ jenkins.saml.email_attribute }}"
      - "  Groups Attribute: {{ jenkins.saml.groups_attribute }}"
      - "  Force Authentication: {{ jenkins.saml.force_authentication }}"
      - ""
      - "ğŸ”‘ Keycloak Configuration:"
      - "  Keycloak URL: {{ keycloak.base_url }}"
      - "  Keycloak Realm: {{ keycloak.realm }}"
      - "  SAML Client ID: {{ keycloak.saml_client.client_id }}"
      - "  Force POST Binding: {{ keycloak.saml_client.attributes.saml_force_post_binding }}"
      - "  Server Signature: {{ keycloak.saml_client.attributes.saml_server_signature }}"
      - "  Protocol Mappers: {{ keycloak.saml_client.protocol_mappers | length }} configured"
      - ""
      - "ğŸ‘¥ Groups Configuration:"
      - "  Jenkins Admins: {{ groups.jenkins_admins.name }}"
      - "  Jenkins Users: {{ groups.jenkins_users.name }}"
      - ""
      - "ğŸ” SAML URLs:"
      - "  IdP SAML Endpoint: {{ keycloak.base_url }}/realms/{{ keycloak.realm }}/protocol/saml"
      - "  IdP Metadata: {{ keycloak.base_url }}/realms/{{ keycloak.realm }}/protocol/saml/descriptor"
      - "  Jenkins Login URL: {{ jenkins.base_url }}/securityRealm/finishLogin"
      - ""
      - "ğŸ“‹ Certificate Info:"
      - "  Certificate Length: {{ keycloak_certificate | length if keycloak_certificate is defined else 'Not extracted' }}"
